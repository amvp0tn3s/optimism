<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">

    <title>CELO <> OP optimism forkdiff</title>

    <link rel="icon" type="image/x-icon" href="">

    <style>
        .line-stat {
            width: 14rem;
            float: right;
        }
        .line-stat div {
            width: 50%;
        }
    </style>

    
<style>
    .term-container {
        background: #171717;
        border-radius: 5px;
        color: white;
        word-break: break-word;
        overflow-wrap: break-word;
        font-family: "SFMono-Regular", Monaco, Menlo, Consolas, "Liberation Mono", Courier, monospace;
        font-size: 12px;
        line-height: 20px;
        padding: 14px 18px;
        white-space: pre-wrap;
    }

    .term-container img { max-width: 100%; }

    .term a { color: inherit; text-decoration: underline; text-decoration-style: dashed; }
    .term a:hover { color: #2882F9 }

    @keyframes blink-animation {
        to {
            visibility: hidden;
        }
    }

    .term-fg1 { } /* don't bold beccause it looks weird */
    .term-fg2 { color: #838887; } /* faint (decreased intensity) - same as gray really */
    .term-fg3 { font-style: italic; } /* italic */
    .term-fg4 { text-decoration: underline; } /* underline */
    .term-fg5 { animation: blink-animation 1s steps(3, start) infinite; } /* blink */
    .term-fg9 { text-decoration: line-through; } /* crossed-out */

    .term-fg30 { color: #666666; } /* black (but we can't use black, so a diff color) */
    .term-fg31 { color: #ff7070; } /* red */
    .term-fg32 { color: #b0f986; } /* green */
    .term-fg33 { color: #c6c502; } /* yellow */
    .term-fg34 { color: #8db7e0; } /* blue */
    .term-fg35 { color: #f271fb; } /* magenta */
    .term-fg36 { color: #6bf7ff; } /* cyan */

    /* high intense colors */
    .term-fgi1 { color: #5ef765; }
    .term-fgi90 { color: #838887; } /* grey */
    .term-fgi91 { color: #ff3333; } /* red */
    .term-fgi92 { color: #00FF00; } /* green */
    .term-fgi93 { color: #fffc67; } /* yellow */
    .term-fgi94 { color: #6871ff; } /* blue */
    .term-fgi95 { color: #ff76ff; } /* magenta */
    .term-fgi96 { color: #60fcff; } /* cyan */

    /* background colors */
    .term-bg40 { background: #676767; } /* grey */
    .term-bg41 { background: #ff4343; } /* red */
    .term-bg42 { background: #99ff5f; } /* green */

    /* custom foreground/background combos for readability */
    .term-fg31.term-bg40 { color: #F8A39F; }

    /* xterm colors */
    .term-fgx16 { color: #000000; }
    .term-fgx17 { color: #00005f; }
    .term-fgx18 { color: #000087; }
    .term-fgx19 { color: #0000af; }
    .term-fgx20 { color: #0000d7; }
    .term-fgx21 { color: #0000ff; }
    .term-fgx22 { color: #005f00; }
    .term-fgx23 { color: #005f5f; }
    .term-fgx24 { color: #005f87; }
    .term-fgx25 { color: #005faf; }
    .term-fgx26 { color: #005fd7; }
    .term-fgx27 { color: #005fff; }
    .term-fgx28 { color: #008700; }
    .term-fgx29 { color: #00875f; }
    .term-fgx30 { color: #008787; }
    .term-fgx31 { color: #0087af; }
    .term-fgx32 { color: #0087d7; }
    .term-fgx33 { color: #0087ff; }
    .term-fgx34 { color: #00af00; }
    .term-fgx35 { color: #00af5f; }
    .term-fgx36 { color: #00af87; }
    .term-fgx37 { color: #00afaf; }
    .term-fgx38 { color: #00afd7; }
    .term-fgx39 { color: #00afff; }
    .term-fgx40 { color: #00d700; }
    .term-fgx41 { color: #00d75f; }
    .term-fgx42 { color: #00d787; }
    .term-fgx43 { color: #00d7af; }
    .term-fgx44 { color: #00d7d7; }
    .term-fgx45 { color: #00d7ff; }
    .term-fgx46 { color: #00ff00; }
    .term-fgx47 { color: #00ff5f; }
    .term-fgx48 { color: #00ff87; }
    .term-fgx49 { color: #00ffaf; }
    .term-fgx50 { color: #00ffd7; }
    .term-fgx51 { color: #00ffff; }
    .term-fgx52 { color: #5f0000; }
    .term-fgx53 { color: #5f005f; }
    .term-fgx54 { color: #5f0087; }
    .term-fgx55 { color: #5f00af; }
    .term-fgx56 { color: #5f00d7; }
    .term-fgx57 { color: #5f00ff; }
    .term-fgx58 { color: #5f5f00; }
    .term-fgx59 { color: #5f5f5f; }
    .term-fgx60 { color: #5f5f87; }
    .term-fgx61 { color: #5f5faf; }
    .term-fgx62 { color: #5f5fd7; }
    .term-fgx63 { color: #5f5fff; }
    .term-fgx64 { color: #5f8700; }
    .term-fgx65 { color: #5f875f; }
    .term-fgx66 { color: #5f8787; }
    .term-fgx67 { color: #5f87af; }
    .term-fgx68 { color: #5f87d7; }
    .term-fgx69 { color: #5f87ff; }
    .term-fgx70 { color: #5faf00; }
    .term-fgx71 { color: #5faf5f; }
    .term-fgx72 { color: #5faf87; }
    .term-fgx73 { color: #5fafaf; }
    .term-fgx74 { color: #5fafd7; }
    .term-fgx75 { color: #5fafff; }
    .term-fgx76 { color: #5fd700; }
    .term-fgx77 { color: #5fd75f; }
    .term-fgx78 { color: #5fd787; }
    .term-fgx79 { color: #5fd7af; }
    .term-fgx80 { color: #5fd7d7; }
    .term-fgx81 { color: #5fd7ff; }
    .term-fgx82 { color: #5fff00; }
    .term-fgx83 { color: #5fff5f; }
    .term-fgx84 { color: #5fff87; }
    .term-fgx85 { color: #5fffaf; }
    .term-fgx86 { color: #5fffd7; }
    .term-fgx87 { color: #5fffff; }
    .term-fgx88 { color: #870000; }
    .term-fgx89 { color: #87005f; }
    .term-fgx90 { color: #870087; }
    .term-fgx91 { color: #8700af; }
    .term-fgx92 { color: #8700d7; }
    .term-fgx93 { color: #8700ff; }
    .term-fgx94 { color: #875f00; }
    .term-fgx95 { color: #875f5f; }
    .term-fgx96 { color: #875f87; }
    .term-fgx97 { color: #875faf; }
    .term-fgx98 { color: #875fd7; }
    .term-fgx99 { color: #875fff; }
    .term-fgx100 { color: #878700; }
    .term-fgx101 { color: #87875f; }
    .term-fgx102 { color: #878787; }
    .term-fgx103 { color: #8787af; }
    .term-fgx104 { color: #8787d7; }
    .term-fgx105 { color: #8787ff; }
    .term-fgx106 { color: #87af00; }
    .term-fgx107 { color: #87af5f; }
    .term-fgx108 { color: #87af87; }
    .term-fgx109 { color: #87afaf; }
    .term-fgx110 { color: #87afd7; }
    .term-fgx111 { color: #87afff; }
    .term-fgx112 { color: #87d700; }
    .term-fgx113 { color: #87d75f; }
    .term-fgx114 { color: #87d787; }
    .term-fgx115 { color: #87d7af; }
    .term-fgx116 { color: #87d7d7; }
    .term-fgx117 { color: #87d7ff; }
    .term-fgx118 { color: #87ff00; }
    .term-fgx119 { color: #87ff5f; }
    .term-fgx120 { color: #87ff87; }
    .term-fgx121 { color: #87ffaf; }
    .term-fgx122 { color: #87ffd7; }
    .term-fgx123 { color: #87ffff; }
    .term-fgx124 { color: #af0000; }
    .term-fgx125 { color: #af005f; }
    .term-fgx126 { color: #af0087; }
    .term-fgx127 { color: #af00af; }
    .term-fgx128 { color: #af00d7; }
    .term-fgx129 { color: #af00ff; }
    .term-fgx130 { color: #af5f00; }
    .term-fgx131 { color: #af5f5f; }
    .term-fgx132 { color: #af5f87; }
    .term-fgx133 { color: #af5faf; }
    .term-fgx134 { color: #af5fd7; }
    .term-fgx135 { color: #af5fff; }
    .term-fgx136 { color: #af8700; }
    .term-fgx137 { color: #af875f; }
    .term-fgx138 { color: #af8787; }
    .term-fgx139 { color: #af87af; }
    .term-fgx140 { color: #af87d7; }
    .term-fgx141 { color: #af87ff; }
    .term-fgx142 { color: #afaf00; }
    .term-fgx143 { color: #afaf5f; }
    .term-fgx144 { color: #afaf87; }
    .term-fgx145 { color: #afafaf; }
    .term-fgx146 { color: #afafd7; }
    .term-fgx147 { color: #afafff; }
    .term-fgx148 { color: #afd700; }
    .term-fgx149 { color: #afd75f; }
    .term-fgx150 { color: #afd787; }
    .term-fgx151 { color: #afd7af; }
    .term-fgx152 { color: #afd7d7; }
    .term-fgx153 { color: #afd7ff; }
    .term-fgx154 { color: #afff00; }
    .term-fgx155 { color: #afff5f; }
    .term-fgx156 { color: #afff87; }
    .term-fgx157 { color: #afffaf; }
    .term-fgx158 { color: #afffd7; }
    .term-fgx159 { color: #afffff; }
    .term-fgx160 { color: #d70000; }
    .term-fgx161 { color: #d7005f; }
    .term-fgx162 { color: #d70087; }
    .term-fgx163 { color: #d700af; }
    .term-fgx164 { color: #d700d7; }
    .term-fgx165 { color: #d700ff; }
    .term-fgx166 { color: #d75f00; }
    .term-fgx167 { color: #d75f5f; }
    .term-fgx168 { color: #d75f87; }
    .term-fgx169 { color: #d75faf; }
    .term-fgx170 { color: #d75fd7; }
    .term-fgx171 { color: #d75fff; }
    .term-fgx172 { color: #d78700; }
    .term-fgx173 { color: #d7875f; }
    .term-fgx174 { color: #d78787; }
    .term-fgx175 { color: #d787af; }
    .term-fgx176 { color: #d787d7; }
    .term-fgx177 { color: #d787ff; }
    .term-fgx178 { color: #d7af00; }
    .term-fgx179 { color: #d7af5f; }
    .term-fgx180 { color: #d7af87; }
    .term-fgx181 { color: #d7afaf; }
    .term-fgx182 { color: #d7afd7; }
    .term-fgx183 { color: #d7afff; }
    .term-fgx184 { color: #d7d700; }
    .term-fgx185 { color: #d7d75f; }
    .term-fgx186 { color: #d7d787; }
    .term-fgx187 { color: #d7d7af; }
    .term-fgx188 { color: #d7d7d7; }
    .term-fgx189 { color: #d7d7ff; }
    .term-fgx190 { color: #d7ff00; }
    .term-fgx191 { color: #d7ff5f; }
    .term-fgx192 { color: #d7ff87; }
    .term-fgx193 { color: #d7ffaf; }
    .term-fgx194 { color: #d7ffd7; }
    .term-fgx195 { color: #d7ffff; }
    .term-fgx196 { color: #ff0000; }
    .term-fgx197 { color: #ff005f; }
    .term-fgx198 { color: #ff0087; }
    .term-fgx199 { color: #ff00af; }
    .term-fgx200 { color: #ff00d7; }
    .term-fgx201 { color: #ff00ff; }
    .term-fgx202 { color: #ff5f00; }
    .term-fgx203 { color: #ff5f5f; }
    .term-fgx204 { color: #ff5f87; }
    .term-fgx205 { color: #ff5faf; }
    .term-fgx206 { color: #ff5fd7; }
    .term-fgx207 { color: #ff5fff; }
    .term-fgx208 { color: #ff8700; }
    .term-fgx209 { color: #ff875f; }
    .term-fgx210 { color: #ff8787; }
    .term-fgx211 { color: #ff87af; }
    .term-fgx212 { color: #ff87d7; }
    .term-fgx213 { color: #ff87ff; }
    .term-fgx214 { color: #ffaf00; }
    .term-fgx215 { color: #ffaf5f; }
    .term-fgx216 { color: #ffaf87; }
    .term-fgx217 { color: #ffafaf; }
    .term-fgx218 { color: #ffafd7; }
    .term-fgx219 { color: #ffafff; }
    .term-fgx220 { color: #ffd700; }
    .term-fgx221 { color: #ffd75f; }
    .term-fgx222 { color: #ffd787; }
    .term-fgx223 { color: #ffd7af; }
    .term-fgx224 { color: #ffd7d7; }
    .term-fgx225 { color: #ffd7ff; }
    .term-fgx226 { color: #ffff00; }
    .term-fgx227 { color: #ffff5f; }
    .term-fgx228 { color: #ffff87; }
    .term-fgx229 { color: #ffffaf; }
    .term-fgx230 { color: #ffffd7; }
    .term-fgx231 { color: #ffffff; }
    .term-fgx232 { color: #080808; }
    .term-fgx233 { color: #121212; }
    .term-fgx234 { color: #1c1c1c; }
    .term-fgx235 { color: #262626; }
    .term-fgx236 { color: #303030; }
    .term-fgx237 { color: #3a3a3a; }
    .term-fgx238 { color: #444444; }
    .term-fgx239 { color: #4e4e4e; }
    .term-fgx240 { color: #585858; }
    .term-fgx241 { color: #626262; }
    .term-fgx242 { color: #6c6c6c; }
    .term-fgx243 { color: #767676; }
    .term-fgx244 { color: #808080; }
    .term-fgx245 { color: #8a8a8a; }
    .term-fgx246 { color: #949494; }
    .term-fgx247 { color: #9e9e9e; }
    .term-fgx248 { color: #a8a8a8; }
    .term-fgx249 { color: #b2b2b2; }
    .term-fgx250 { color: #bcbcbc; }
    .term-fgx251 { color: #c6c6c6; }
    .term-fgx252 { color: #d0d0d0; }
    .term-fgx253 { color: #dadada; }
    .term-fgx254 { color: #e4e4e4; }
    .term-fgx255 { color: #eeeeee; }
</style>

</head>
<body>
    <div class="col-xl-10 col-xxl-8 mx-auto px-3 py-1 py-md-3">
        <main class="container-fluid">
            <div class="row">
                <div>
                    <div class="float-end">
                        <div class="form-check form-switch">
                            <i class="bi bi-brightness-low" id="dark-mode-icon"></i>
                            <input class="form-check-input" type="checkbox" role="switch" id="dark-mode-toggle" data-bs-toggle="tooltip"
                                   data-bs-placement="bottom" data-bs-title="Toggle Dark Mode"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"role="button" aria-expanded="true" aria-controls="id-b87ab34b5d49431aa6768804">
        
            <div class="col-12 col-sm-9 text-start"><h1>Celo's optimism</h1></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+347</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse show border-1 ps-3 my-3" id="id-b87ab34b5d49431aa6768804">
        <div><p>This is an overview of the changes in <a href="https://github.com/celo-org/optimism">Celo&rsquo;s <code>optimism</code> implementation</a>,
a fork of <a href="https://github.com/ethereum-optimism/optimism">Optimism&rsquo;s <code>optimism</code></a>.</p>

<p>Changes are currently separated by sub-package or component. Check out the <a href="https://github.com/celo-org/optimism/blob/develop/README.md">README</a>
for more details about each of these components and packages.</p>
</div>
        <div>
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-8729f0195ca48dbd65557e42"role="button" aria-expanded="false" aria-controls="id-8729f0195ca48dbd65557e42">
        
            <div class="col-12 col-sm-9 text-start"><h2>packages/*</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-8729f0195ca48dbd65557e42">
        <div></div>
        <div>
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-bafd962dd29ad65fd13b8fd3"role="button" aria-expanded="false" aria-controls="id-bafd962dd29ad65fd13b8fd3">
        
            <div class="col-12 col-sm-9 text-start"><h3>common-ts</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-bafd962dd29ad65fd13b8fd3">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-65922dc17889b39468948728"role="button" aria-expanded="false" aria-controls="id-65922dc17889b39468948728">
        
            <div class="col-12 col-sm-9 text-start"><h3>contracts-bedrock</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-65922dc17889b39468948728">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-5958d7a6bdf2395700b5d9c4"role="button" aria-expanded="false" aria-controls="id-5958d7a6bdf2395700b5d9c4">
        
            <div class="col-12 col-sm-9 text-start"><h3>core-utils</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-5958d7a6bdf2395700b5d9c4">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-eb9659704dcda8fe559d7403"role="button" aria-expanded="false" aria-controls="id-eb9659704dcda8fe559d7403">
        
            <div class="col-12 col-sm-9 text-start"><h3>chain-mon</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-eb9659704dcda8fe559d7403">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-56a4125652c33bf079e3a7f9"role="button" aria-expanded="false" aria-controls="id-56a4125652c33bf079e3a7f9">
        
            <div class="col-12 col-sm-9 text-start"><h3>sdk</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-56a4125652c33bf079e3a7f9">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-d19ec540cbb9d619b5dc33dc"role="button" aria-expanded="false" aria-controls="id-d19ec540cbb9d619b5dc33dc">
        
            <div class="col-12 col-sm-9 text-start"><h2>op-bindings</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-d19ec540cbb9d619b5dc33dc">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-a32a20e48e2d525795795d0d"role="button" aria-expanded="false" aria-controls="id-a32a20e48e2d525795795d0d">
        
            <div class="col-12 col-sm-9 text-start"><h2>op-batcher</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-a32a20e48e2d525795795d0d">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-017ac1b2a14c3a08b4e297d2"role="button" aria-expanded="false" aria-controls="id-017ac1b2a14c3a08b4e297d2">
        
            <div class="col-12 col-sm-9 text-start"><h2>op-bootnode</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-017ac1b2a14c3a08b4e297d2">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-39366a6cbe249582332e6234"role="button" aria-expanded="false" aria-controls="id-39366a6cbe249582332e6234">
        
            <div class="col-12 col-sm-9 text-start"><h2>op-chain-ops</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+344</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-39366a6cbe249582332e6234">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-1580dda76194fe3d301e3b7e" role="button"
                   aria-expanded="false" aria-controls="id-1580dda76194fe3d301e3b7e">
                    <code>op-chain-ops/migrate.sh</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/celo-org/optimism/blob/b9559d61caf873fdaa89f22e6960fdaed8511263/op-chain-ops/migrate.sh" target="_blank">CELO <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+9</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-1580dda76194fe3d301e3b7e"><span class="term-fg1">diff --git OP&#47;op-chain-ops&#47;migrate.sh CELO&#47;op-chain-ops&#47;migrate.sh</span>
<span class="term-fg1">new file mode 100755</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..6f317dc64886c3b541f7ca67f4fccfbb3ebaaddb</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ CELO&#47;op-chain-ops&#47;migrate.sh</span>
<span class="term-fg36">@@ -0,0 +1,10 @@</span>
<span class="term-fg32">+set -o errexit   # abort on nonzero exitstatus</span>
<span class="term-fg32">+set -o nounset   # abort on unbound variable</span>
<span class="term-fg32">+set -o pipefail  # don&#39;t hide errors within pipes</span>
<span class="term-fg32">+set -x</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+echo &quot;Starting Migration&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+.&#47;bin&#47;op-migrate \</span>
<span class="term-fg32">+  --db-path=${CELO_DATADIR:-~&#47;celo-blockchain&#47;tmp&#47;testenv&#47;validator-00&#47;} \</span>
<span class="term-fg32">+  --dry-run</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2a10f6b8b565b7175c2e00df" role="button"
                   aria-expanded="false" aria-controls="id-2a10f6b8b565b7175c2e00df">
                    <code>op-chain-ops/cmd/op-migrate/README.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/celo-org/optimism/blob/b9559d61caf873fdaa89f22e6960fdaed8511263/op-chain-ops/cmd/op-migrate/README.md" target="_blank">CELO <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+23</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2a10f6b8b565b7175c2e00df"><span class="term-fg1">diff --git OP&#47;op-chain-ops&#47;cmd&#47;op-migrate&#47;README.md CELO&#47;op-chain-ops&#47;cmd&#47;op-migrate&#47;README.md</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..700aab909a92fec1e7ecadb0c1946c613baf79bf</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ CELO&#47;op-chain-ops&#47;cmd&#47;op-migrate&#47;README.md</span>
<span class="term-fg36">@@ -0,0 +1,24 @@</span>
<span class="term-fg32">+# State migrator</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+This tool allows migrating the state of a Celo chain to a genesis block for a CeL2 chain.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## Test Setup</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+Create a local chain (assuming this in run in the `celo-blockchain` repository):</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+```sh</span>
<span class="term-fg32">+build&#47;bin&#47;mycelo genesis --buildpath compiled-system-contracts --dev.accounts 2 --newenv tmp&#47;testenv --mnemonic &quot;miss fire behind decide egg buyer honey seven advance uniform profit renew&quot;</span>
<span class="term-fg32">+build&#47;bin&#47;mycelo validator-init tmp&#47;testenv&#47;</span>
<span class="term-fg32">+build&#47;bin&#47;mycelo validator-run tmp&#47;testenv&#47;</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+Create some data</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+```sh</span>
<span class="term-fg32">+build&#47;bin&#47;mycelo load-bot tmp&#47;testenv</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+To run the migration, run in `op-chain-ops` (set `CELO_DATADIR` if the `celo-blockchain` repo is not located at `~&#47;celo-blockchain`):</span>
<span class="term-fg32">+```sh</span>
<span class="term-fg32">+make &amp;&amp; .&#47;migrate.sh</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2a956f7094619ea075a3a013" role="button"
                   aria-expanded="false" aria-controls="id-2a956f7094619ea075a3a013">
                    <code>op-chain-ops/cmd/op-migrate/main.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/celo-org/optimism/blob/b9559d61caf873fdaa89f22e6960fdaed8511263/op-chain-ops/cmd/op-migrate/main.go" target="_blank">CELO <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+312</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2a956f7094619ea075a3a013"><span class="term-fg1">diff --git OP&#47;op-chain-ops&#47;cmd&#47;op-migrate&#47;main.go CELO&#47;op-chain-ops&#47;cmd&#47;op-migrate&#47;main.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..b1e189023802a82350b6641e2f17df89d41968c9</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ CELO&#47;op-chain-ops&#47;cmd&#47;op-migrate&#47;main.go</span>
<span class="term-fg36">@@ -0,0 +1,312 @@</span>
<span class="term-fg32">+package main</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;path&#47;filepath&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum-optimism&#47;optimism&#47;op-bindings&#47;predeploys&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;mattn&#47;go-isatty&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;urfave&#47;cli&#47;v2&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;rawdb&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;ethdb&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;trie&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; from `packages&#47;contracts-bedrock&#47;deploy-config&#47;internal-devnet.json`</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	EIP1559Denominator = uint64(50) &#47;&#47; TODO: what values</span>
<span class="term-fg32">+	EIP1559Elasticity  = uint64(10)</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func main() {</span>
<span class="term-fg32">+	log.Root().SetHandler(log.StreamHandler(os.Stderr, log.TerminalFormat(isatty.IsTerminal(os.Stderr.Fd()))))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	app := &amp;cli.App{</span>
<span class="term-fg32">+		Name:  &quot;migrate&quot;,</span>
<span class="term-fg32">+		Usage: &quot;Migrate Celo state to a CeL2 genesis DB&quot;,</span>
<span class="term-fg32">+		Flags: []cli.Flag{</span>
<span class="term-fg32">+			&amp;cli.StringFlag{</span>
<span class="term-fg32">+				Name:     &quot;db-path&quot;,</span>
<span class="term-fg32">+				Usage:    &quot;Path to database&quot;,</span>
<span class="term-fg32">+				Required: true,</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			&amp;cli.BoolFlag{</span>
<span class="term-fg32">+				Name:  &quot;dry-run&quot;,</span>
<span class="term-fg32">+				Usage: &quot;Dry run the upgrade by not committing the database&quot;,</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			&amp;cli.BoolFlag{</span>
<span class="term-fg32">+				Name:  &quot;no-check&quot;,</span>
<span class="term-fg32">+				Usage: &quot;Do not perform sanity checks. This should only be used for testing&quot;,</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			&amp;cli.IntFlag{</span>
<span class="term-fg32">+				Name:  &quot;db-cache&quot;,</span>
<span class="term-fg32">+				Usage: &quot;LevelDB cache size in mb&quot;,</span>
<span class="term-fg32">+				Value: 1024,</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			&amp;cli.IntFlag{</span>
<span class="term-fg32">+				Name:  &quot;db-handles&quot;,</span>
<span class="term-fg32">+				Usage: &quot;LevelDB number of handles&quot;,</span>
<span class="term-fg32">+				Value: 60,</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		Action: func(ctx *cli.Context) error {</span>
<span class="term-fg32">+			dbCache := ctx.Int(&quot;db-cache&quot;)</span>
<span class="term-fg32">+			dbHandles := ctx.Int(&quot;db-handles&quot;)</span>
<span class="term-fg32">+			dbPath := ctx.String(&quot;db-path&quot;)</span>
<span class="term-fg32">+			log.Info(&quot;Opening database&quot;, &quot;dbCache&quot;, dbCache, &quot;dbHandles&quot;, dbHandles, &quot;dbPath&quot;, dbPath)</span>
<span class="term-fg32">+			ldb, err := Open(dbPath, dbCache, dbHandles)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				return fmt.Errorf(&quot;cannot open DB: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			dryRun := ctx.Bool(&quot;dry-run&quot;)</span>
<span class="term-fg32">+			noCheck := ctx.Bool(&quot;no-check&quot;)</span>
<span class="term-fg32">+			if noCheck {</span>
<span class="term-fg32">+				panic(&quot;must run with check on&quot;)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			&#47;&#47; Perform the migration</span>
<span class="term-fg32">+			_, err = MigrateDB(ldb, !dryRun, noCheck)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				return err</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			&#47;&#47; Close the database handle</span>
<span class="term-fg32">+			if err := ldb.Close(); err != nil {</span>
<span class="term-fg32">+				return err</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			log.Info(&quot;Finished migration successfully!&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			return nil</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err := app.Run(os.Args); err != nil {</span>
<span class="term-fg32">+		log.Crit(&quot;error in migration&quot;, &quot;err&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type MigrationResult struct {</span>
<span class="term-fg32">+	TransitionHeight    uint64</span>
<span class="term-fg32">+	TransitionTimestamp uint64</span>
<span class="term-fg32">+	TransitionBlockHash common.Hash</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; MigrateDB will migrate a celo database to a new OP genesis block</span>
<span class="term-fg32">+func MigrateDB(ldb ethdb.Database, commit, noCheck bool) (*MigrationResult, error) {</span>
<span class="term-fg32">+	log.Info(&quot;Migrating DB&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Grab the hash of the tip of the legacy chain.</span>
<span class="term-fg32">+	hash := rawdb.ReadHeadHeaderHash(ldb)</span>
<span class="term-fg32">+	log.Info(&quot;Reading chain tip from database&quot;, &quot;hash&quot;, hash)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Grab the header number.</span>
<span class="term-fg32">+	num := rawdb.ReadHeaderNumber(ldb, hash)</span>
<span class="term-fg32">+	if num == nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;cannot find header number for %s&quot;, hash)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	log.Info(&quot;Reading chain tip num from database&quot;, &quot;number&quot;, num)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Grab the full header.</span>
<span class="term-fg32">+	header := rawdb.ReadHeader(ldb, hash, *num)</span>
<span class="term-fg32">+	trieRoot := header.Root</span>
<span class="term-fg32">+	log.Info(&quot;Read header from database&quot;, &quot;number&quot;, header)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; We need to update the chain config to set the correct hardforks.</span>
<span class="term-fg32">+	genesisHash := rawdb.ReadCanonicalHash(ldb, 0)</span>
<span class="term-fg32">+	cfg := rawdb.ReadChainConfig(ldb, genesisHash)</span>
<span class="term-fg32">+	if cfg == nil {</span>
<span class="term-fg32">+		log.Crit(&quot;chain config not found&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	log.Info(&quot;Read config from database&quot;, &quot;config&quot;, cfg)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; dbFactory := func() (*state.StateDB, error) {</span>
<span class="term-fg32">+	&#47;&#47; 	&#47;&#47; Set up the backing store.</span>
<span class="term-fg32">+	&#47;&#47; 	underlyingDB := state.NewDatabaseWithConfig(ldb, &amp;trie.Config{</span>
<span class="term-fg32">+	&#47;&#47; 		Preimages: true,</span>
<span class="term-fg32">+	&#47;&#47; 		Cache:     1024,</span>
<span class="term-fg32">+	&#47;&#47; 	})</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; 	&#47;&#47; Open up the state database.</span>
<span class="term-fg32">+	&#47;&#47; 	db, err := state.New(header.Root, underlyingDB, nil)</span>
<span class="term-fg32">+	&#47;&#47; 	if err != nil {</span>
<span class="term-fg32">+	&#47;&#47; 		return nil, fmt.Errorf(&quot;cannot open StateDB: %w&quot;, err)</span>
<span class="term-fg32">+	&#47;&#47; 	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; 	return db, nil</span>
<span class="term-fg32">+	&#47;&#47; }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; db, err := dbFactory()</span>
<span class="term-fg32">+	&#47;&#47; if err != nil {</span>
<span class="term-fg32">+	&#47;&#47; 	return nil, fmt.Errorf(&quot;cannot create StateDB: %w&quot;, err)</span>
<span class="term-fg32">+	&#47;&#47; }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Remove old blocks, so that we start with a fresh genesis block</span>
<span class="term-fg32">+	currentHash := header.ParentHash</span>
<span class="term-fg32">+	for {</span>
<span class="term-fg32">+		&#47;&#47; There are no uncles in Celo</span>
<span class="term-fg32">+		num = rawdb.ReadHeaderNumber(ldb, currentHash)</span>
<span class="term-fg32">+		hash = rawdb.ReadCanonicalHash(ldb, *num)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		log.Info(&quot;Deleting block&quot;, &quot;hash&quot;, currentHash, &quot;c&quot;, hash, &quot;number&quot;, *num)</span>
<span class="term-fg32">+		if commit {</span>
<span class="term-fg32">+			rawdb.DeleteBlock(ldb, currentHash, *num)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if *num == 0 {</span>
<span class="term-fg32">+			break</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		header = rawdb.ReadHeader(ldb, currentHash, *num)</span>
<span class="term-fg32">+		if header == nil {</span>
<span class="term-fg32">+			return nil, fmt.Errorf(&quot;couldn&#39;t find header&quot;)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		currentHash = header.ParentHash</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	log.Info(&quot;Successfully cleaned old blocks&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; We&#39;re done messing around with the database, so we can now commit the changes to the DB.</span>
<span class="term-fg32">+	&#47;&#47; Note that this doesn&#39;t actually write the changes to disk.</span>
<span class="term-fg32">+	&#47;&#47; log.Info(&quot;Committing state DB&quot;)</span>
<span class="term-fg32">+	&#47;&#47; newRoot, err := db.Commit(true)</span>
<span class="term-fg32">+	&#47;&#47; if err != nil {</span>
<span class="term-fg32">+	&#47;&#47; 	return nil, err</span>
<span class="term-fg32">+	&#47;&#47; }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	log.Info(&quot;Creating new Genesis block&quot;)</span>
<span class="term-fg32">+	&#47;&#47; Create the header for the Bedrock transition block.</span>
<span class="term-fg32">+	cel2Header := &amp;types.Header{</span>
<span class="term-fg32">+		ParentHash:  common.Hash{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},</span>
<span class="term-fg32">+		UncleHash:   types.EmptyUncleHash,</span>
<span class="term-fg32">+		Coinbase:    predeploys.SequencerFeeVaultAddr, &#47;&#47; TODO</span>
<span class="term-fg32">+		Root:        trieRoot,</span>
<span class="term-fg32">+		TxHash:      types.EmptyRootHash,</span>
<span class="term-fg32">+		ReceiptHash: types.EmptyRootHash,</span>
<span class="term-fg32">+		Bloom:       types.Bloom{},</span>
<span class="term-fg32">+		Difficulty:  common.Big0,</span>
<span class="term-fg32">+		Number:      common.Big0,</span>
<span class="term-fg32">+		GasLimit:    (uint64)(20_000_000),</span>
<span class="term-fg32">+		GasUsed:     0,</span>
<span class="term-fg32">+		Time:        uint64(12345),</span>
<span class="term-fg32">+		Extra:       []byte(&quot;CeL2&quot;),</span>
<span class="term-fg32">+		MixDigest:   common.Hash{},</span>
<span class="term-fg32">+		Nonce:       types.BlockNonce{},</span>
<span class="term-fg32">+		BaseFee:     big.NewInt(params.InitialBaseFee),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Create the Bedrock transition block from the header. Note that there are no transactions,</span>
<span class="term-fg32">+	&#47;&#47; uncle blocks, or receipts in the Bedrock transition block.</span>
<span class="term-fg32">+	cel2Block := types.NewBlock(cel2Header, nil, nil, nil, trie.NewStackTrie(nil))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; We did it!</span>
<span class="term-fg32">+	log.Info(</span>
<span class="term-fg32">+		&quot;Built Bedrock transition&quot;,</span>
<span class="term-fg32">+		&quot;hash&quot;, cel2Block.Hash(),</span>
<span class="term-fg32">+		&quot;root&quot;, cel2Block.Root(),</span>
<span class="term-fg32">+		&quot;number&quot;, cel2Block.NumberU64(),</span>
<span class="term-fg32">+		&quot;gas-used&quot;, cel2Block.GasUsed(),</span>
<span class="term-fg32">+		&quot;gas-limit&quot;, cel2Block.GasLimit(),</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	log.Info(&quot;Header&quot;, &quot;header&quot;, cel2Header)</span>
<span class="term-fg32">+	log.Info(&quot;Body&quot;, &quot;Body&quot;, cel2Block)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Create the result of the migration.</span>
<span class="term-fg32">+	res := &amp;MigrationResult{</span>
<span class="term-fg32">+		TransitionHeight:    cel2Block.NumberU64(),</span>
<span class="term-fg32">+		TransitionTimestamp: cel2Block.Time(),</span>
<span class="term-fg32">+		TransitionBlockHash: cel2Block.Hash(),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; If we&#39;re not actually writing this to disk, then we&#39;re done.</span>
<span class="term-fg32">+	if !commit {</span>
<span class="term-fg32">+		log.Info(&quot;Dry run complete&quot;)</span>
<span class="term-fg32">+		return res, nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Otherwise we need to write the changes to disk. First we commit the state changes.</span>
<span class="term-fg32">+	&#47;&#47; log.Info(&quot;Committing trie DB&quot;)</span>
<span class="term-fg32">+	&#47;&#47; if err := db.Database().TrieDB().Commit(newRoot, true); err != nil {</span>
<span class="term-fg32">+	&#47;&#47; 	return nil, err</span>
<span class="term-fg32">+	&#47;&#47; }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Next we write the Cel2 genesis block to the database.</span>
<span class="term-fg32">+	rawdb.WriteTd(ldb, cel2Block.Hash(), cel2Block.NumberU64(), cel2Block.Difficulty())</span>
<span class="term-fg32">+	rawdb.WriteBlock(ldb, cel2Block)</span>
<span class="term-fg32">+	rawdb.WriteReceipts(ldb, cel2Block.Hash(), cel2Block.NumberU64(), nil)</span>
<span class="term-fg32">+	rawdb.WriteCanonicalHash(ldb, cel2Block.Hash(), cel2Block.NumberU64())</span>
<span class="term-fg32">+	rawdb.WriteHeadBlockHash(ldb, cel2Block.Hash())</span>
<span class="term-fg32">+	rawdb.WriteHeadFastBlockHash(ldb, cel2Block.Hash())</span>
<span class="term-fg32">+	rawdb.WriteHeadHeaderHash(ldb, cel2Block.Hash())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; TODO</span>
<span class="term-fg32">+	&#47;&#47; Make the first CeL2 block a finalized block.</span>
<span class="term-fg32">+	rawdb.WriteFinalizedBlockHash(ldb, cel2Block.Hash())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Set the standard options.</span>
<span class="term-fg32">+	&#47;&#47; TODO: What about earlier hardforks, e.g. does berlin have to be enabled as it never was on Celo?</span>
<span class="term-fg32">+	cfg.LondonBlock = cel2Block.Number()</span>
<span class="term-fg32">+	cfg.ArrowGlacierBlock = cel2Block.Number()</span>
<span class="term-fg32">+	cfg.GrayGlacierBlock = cel2Block.Number()</span>
<span class="term-fg32">+	cfg.MergeNetsplitBlock = cel2Block.Number()</span>
<span class="term-fg32">+	cfg.TerminalTotalDifficulty = big.NewInt(0)</span>
<span class="term-fg32">+	cfg.TerminalTotalDifficultyPassed = true</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Set the Optimism options.</span>
<span class="term-fg32">+	cfg.BedrockBlock = cel2Block.Number()</span>
<span class="term-fg32">+	&#47;&#47; Enable Regolith from the start of Bedrock</span>
<span class="term-fg32">+	cfg.RegolithTime = new(uint64) &#47;&#47; what are those? do we need those?</span>
<span class="term-fg32">+	cfg.Optimism = &amp;params.OptimismConfig{</span>
<span class="term-fg32">+		EIP1559Denominator: EIP1559Denominator,</span>
<span class="term-fg32">+		EIP1559Elasticity:  EIP1559Elasticity,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Write the chain config to disk.</span>
<span class="term-fg32">+	rawdb.WriteChainConfig(ldb, cel2Block.Hash(), cfg)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Yay!</span>
<span class="term-fg32">+	log.Info(</span>
<span class="term-fg32">+		&quot;Wrote chain config&quot;,</span>
<span class="term-fg32">+		&quot;1559-denominator&quot;, EIP1559Denominator,</span>
<span class="term-fg32">+		&quot;1559-elasticity&quot;, EIP1559Elasticity,</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; We&#39;re done!</span>
<span class="term-fg32">+	log.Info(</span>
<span class="term-fg32">+		&quot;Wrote CeL2 transition block&quot;,</span>
<span class="term-fg32">+		&quot;height&quot;, cel2Header.Number,</span>
<span class="term-fg32">+		&quot;root&quot;, cel2Header.Root.String(),</span>
<span class="term-fg32">+		&quot;hash&quot;, cel2Header.Hash().String(),</span>
<span class="term-fg32">+		&quot;timestamp&quot;, cel2Header.Time,</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Return the result and have a nice day.</span>
<span class="term-fg32">+	return res, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func Open(path string, cache int, handles int) (ethdb.Database, error) {</span>
<span class="term-fg32">+	chaindataPath := filepath.Join(path, &quot;celo&quot;, &quot;chaindata&quot;)</span>
<span class="term-fg32">+	ancientPath := filepath.Join(chaindataPath, &quot;ancient&quot;)</span>
<span class="term-fg32">+	ldb, err := rawdb.Open(rawdb.OpenOptions{</span>
<span class="term-fg32">+		Type:              &quot;leveldb&quot;,</span>
<span class="term-fg32">+		Directory:         chaindataPath,</span>
<span class="term-fg32">+		AncientsDirectory: ancientPath,</span>
<span class="term-fg32">+		Namespace:         &quot;&quot;,</span>
<span class="term-fg32">+		Cache:             cache,</span>
<span class="term-fg32">+		Handles:           handles,</span>
<span class="term-fg32">+		ReadOnly:          false,</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return ldb, nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-7f26c36de433bbe252219725"role="button" aria-expanded="false" aria-controls="id-7f26c36de433bbe252219725">
        
            <div class="col-12 col-sm-9 text-start"><h2>op-challenger</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-7f26c36de433bbe252219725">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-59d2294e7a33d1231ae6c657"role="button" aria-expanded="false" aria-controls="id-59d2294e7a33d1231ae6c657">
        
            <div class="col-12 col-sm-9 text-start"><h2>op-e2e</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-59d2294e7a33d1231ae6c657">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-77e231fe47c5a71830e66182"role="button" aria-expanded="false" aria-controls="id-77e231fe47c5a71830e66182">
        
            <div class="col-12 col-sm-9 text-start"><h2>op-exporter</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-77e231fe47c5a71830e66182">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-a8d12b4a6d91b005c94b7d88"role="button" aria-expanded="false" aria-controls="id-a8d12b4a6d91b005c94b7d88">
        
            <div class="col-12 col-sm-9 text-start"><h2>op-heartbeat</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-a8d12b4a6d91b005c94b7d88">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-ada5826b7080af9267045117"role="button" aria-expanded="false" aria-controls="id-ada5826b7080af9267045117">
        
            <div class="col-12 col-sm-9 text-start"><h2>op-node</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-ada5826b7080af9267045117">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-8d39edb2e8551770960a636b"role="button" aria-expanded="false" aria-controls="id-8d39edb2e8551770960a636b">
        
            <div class="col-12 col-sm-9 text-start"><h2>op-program</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-8d39edb2e8551770960a636b">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-6bb9e2ce51b6e701bc651ca4"role="button" aria-expanded="false" aria-controls="id-6bb9e2ce51b6e701bc651ca4">
        
            <div class="col-12 col-sm-9 text-start"><h2>op-proposer</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-6bb9e2ce51b6e701bc651ca4">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-b357e1f88c7ed4b30d896b6b"role="button" aria-expanded="false" aria-controls="id-b357e1f88c7ed4b30d896b6b">
        
            <div class="col-12 col-sm-9 text-start"><h2>op-service</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-b357e1f88c7ed4b30d896b6b">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-19058253e32dcde10d2fe3a7"role="button" aria-expanded="false" aria-controls="id-19058253e32dcde10d2fe3a7">
        
            <div class="col-12 col-sm-9 text-start"><h2>op-signer</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-19058253e32dcde10d2fe3a7">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-7887363b39774dd982d80b17"role="button" aria-expanded="false" aria-controls="id-7887363b39774dd982d80b17">
        
            <div class="col-12 col-sm-9 text-start"><h2>op-wheel</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-7887363b39774dd982d80b17">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-2526f9dd9fc9dd6cbc3e0ca2"role="button" aria-expanded="false" aria-controls="id-2526f9dd9fc9dd6cbc3e0ca2">
        
            <div class="col-12 col-sm-9 text-start"><h2>ops-bedrock</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-2526f9dd9fc9dd6cbc3e0ca2">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-35bdf592184803153cf7a02e"role="button" aria-expanded="false" aria-controls="id-35bdf592184803153cf7a02e">
        
            <div class="col-12 col-sm-9 text-start"><h2>proxyd</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-35bdf592184803153cf7a02e">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-9a1393bc5f033e7248ea8c14"role="button" aria-expanded="false" aria-controls="id-9a1393bc5f033e7248ea8c14">
        
            <div class="col-12 col-sm-9 text-start"><h2>specs</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-9a1393bc5f033e7248ea8c14">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-898300a054e2482d8182316a"role="button" aria-expanded="false" aria-controls="id-898300a054e2482d8182316a">
        
            <div class="col-12 col-sm-9 text-start"><h2>indexer</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+0</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-898300a054e2482d8182316a">
        <div></div>
        <div>
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-b1cf29be8ba913bf4ddb5494"role="button" aria-expanded="false" aria-controls="id-b1cf29be8ba913bf4ddb5494">
        
            <div class="col-12 col-sm-9 text-start"><h2>Other changes</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+3</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-b1cf29be8ba913bf4ddb5494">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-34a02431ca5dcec5d780da12" role="button"
                   aria-expanded="false" aria-controls="id-34a02431ca5dcec5d780da12">
                    <code>.gitignore</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/optimism/blob/c0f0f2d5fc6f1aaa6bf05e102ec0b8bdf74356db/.gitignore" target="_blank">OP <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/celo-org/optimism/blob/b9559d61caf873fdaa89f22e6960fdaed8511263/.gitignore" target="_blank">CELO <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-34a02431ca5dcec5d780da12"><span class="term-fg1">diff --git OP&#47;.gitignore CELO&#47;.gitignore</span>
<span class="term-fg1">index f99b004058ed08c9f07812dd3964436440a963b9..e5a62566a680731ac12ac58a921cff6bd47df820 100644</span>
<span class="term-fg1">--- OP&#47;.gitignore</span>
<span class="term-fg1">+++ CELO&#47;.gitignore</span>
<span class="term-fg36">@@ -47,3 +47,6 @@</span> __pycache__
&nbsp;
 # Ignore echidna artifacts
 crytic-export
<span class="term-fg32">+</span>
<span class="term-fg32">+# vscode</span>
<span class="term-fg32">+.vscode&#47;</span></div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

                
                    <div class="text-muted">
                        <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-33b38df62732c865da9f8e0a"role="button" aria-expanded="false" aria-controls="id-33b38df62732c865da9f8e0a">
        
            <div class="col-12 col-sm-9 text-start"><h4>Ignored changes</h4></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+181</span></div>
                <div class="text-start"><span class="text-danger">-540</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-33b38df62732c865da9f8e0a">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7b22eea2c5aecc2eacaf8fce" role="button"
                   aria-expanded="false" aria-controls="id-7b22eea2c5aecc2eacaf8fce">
                    <code>.circleci/config.yml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/optimism/blob/c0f0f2d5fc6f1aaa6bf05e102ec0b8bdf74356db/.circleci/config.yml" target="_blank">OP <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/celo-org/optimism/blob/b9559d61caf873fdaa89f22e6960fdaed8511263/.circleci/config.yml" target="_blank">CELO <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-540</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7b22eea2c5aecc2eacaf8fce"><span class="term-fg1">diff --git OP&#47;.circleci&#47;config.yml CELO&#47;.circleci&#47;config.yml</span>
<span class="term-fg1">index 95a5c4f83ce5799d319efa03e06fe8ba26bf7dc4..9a0bea1f61fdf4d2a71a6fc50872b58a84232697 100644</span>
<span class="term-fg1">--- OP&#47;.circleci&#47;config.yml</span>
<span class="term-fg1">+++ CELO&#47;.circleci&#47;config.yml</span>
<span class="term-fg36">@@ -2,49 +2,8 @@</span> version: 2.1
&nbsp;
 orbs:
   go: circleci&#47;go@1.5.0
<span class="term-fg31">-  gcp-cli: circleci&#47;gcp-cli@3.0.1</span>
<span class="term-fg31">-  slack: circleci&#47;slack@4.10.1</span>
<span class="term-fg32">+</span>
 commands:
<span class="term-fg31">-  gcp-oidc-authenticate:</span>
<span class="term-fg31">-    description: &quot;Authenticate with GCP using a CircleCI OIDC token.&quot;</span>
<span class="term-fg31">-    parameters:</span>
<span class="term-fg31">-      project_id:</span>
<span class="term-fg31">-        type: env_var_name</span>
<span class="term-fg31">-        default: GCP_PROJECT_ID</span>
<span class="term-fg31">-      workload_identity_pool_id:</span>
<span class="term-fg31">-        type: env_var_name</span>
<span class="term-fg31">-        default: GCP_WIP_ID</span>
<span class="term-fg31">-      workload_identity_pool_provider_id:</span>
<span class="term-fg31">-        type: env_var_name</span>
<span class="term-fg31">-        default: GCP_WIP_PROVIDER_ID</span>
<span class="term-fg31">-      service_account_email:</span>
<span class="term-fg31">-        type: env_var_name</span>
<span class="term-fg31">-        default: GCP_SERVICE_ACCOUNT_EMAIL</span>
<span class="term-fg31">-      gcp_cred_config_file_path:</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-        default: &#47;home&#47;circleci&#47;gcp_cred_config.json</span>
<span class="term-fg31">-      oidc_token_file_path:</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-        default: &#47;home&#47;circleci&#47;oidc_token.json</span>
<span class="term-fg31">-    steps:</span>
<span class="term-fg31">-      - run:</span>
<span class="term-fg31">-          name: &quot;Create OIDC credential configuration&quot;</span>
<span class="term-fg31">-          command: |</span>
<span class="term-fg31">-            # Store OIDC token in temp file</span>
<span class="term-fg31">-            echo $CIRCLE_OIDC_TOKEN &gt; &lt;&lt; parameters.oidc_token_file_path &gt;&gt;</span>
<span class="term-fg31">-            # Create a credential configuration for the generated OIDC ID Token</span>
<span class="term-fg31">-            gcloud iam workload-identity-pools create-cred-config \</span>
<span class="term-fg31">-                &quot;projects&#47;${&lt;&lt; parameters.project_id &gt;&gt;}&#47;locations&#47;global&#47;workloadIdentityPools&#47;${&lt;&lt; parameters.workload_identity_pool_id &gt;&gt;}&#47;providers&#47;${&lt;&lt; parameters.workload_identity_pool_provider_id &gt;&gt;}&quot;\</span>
<span class="term-fg31">-                --output-file=&quot;&lt;&lt; parameters.gcp_cred_config_file_path &gt;&gt;&quot; \</span>
<span class="term-fg31">-                --service-account=&quot;${&lt;&lt; parameters.service_account_email &gt;&gt;}&quot; \</span>
<span class="term-fg31">-                --credential-source-file=&lt;&lt; parameters.oidc_token_file_path &gt;&gt;</span>
<span class="term-fg31">-      - run:</span>
<span class="term-fg31">-          name: &quot;Authenticate with GCP using OIDC&quot;</span>
<span class="term-fg31">-          command: |</span>
<span class="term-fg31">-            # Configure gcloud to leverage the generated credential configuration</span>
<span class="term-fg31">-            gcloud auth login --brief --cred-file &quot;&lt;&lt; parameters.gcp_cred_config_file_path &gt;&gt;&quot;</span>
<span class="term-fg31">-            # Configure ADC</span>
<span class="term-fg31">-            echo &quot;export GOOGLE_APPLICATION_CREDENTIALS=&#39;&lt;&lt; parameters.gcp_cred_config_file_path &gt;&gt;&#39;&quot; | tee -a &quot;$BASH_ENV&quot;</span>
   check-changed:
     description: &quot;Conditionally halts a step if certain modules change&quot;
     parameters:
<span class="term-fg36">@@ -106,7 +65,6 @@</span>
   pnpm-monorepo:
     docker:
       - image: us-docker.pkg.dev&#47;oplabs-tools-artifacts&#47;images&#47;ci-builder:latest
<span class="term-fg31">-    resource_class: xlarge</span>
     steps:
       - checkout
       - check-changed:
<span class="term-fg36">@@ -144,180 +102,6 @@</span>           paths:
             - &quot;packages&#47;**&#47;dist&quot;
             - &quot;packages&#47;contracts-bedrock&#47;forge-artifacts&quot;
&nbsp;
<span class="term-fg31">-  docker-build:</span>
<span class="term-fg31">-    environment:</span>
<span class="term-fg31">-      DOCKER_BUILDKIT: 1</span>
<span class="term-fg31">-    parameters:</span>
<span class="term-fg31">-      docker_name:</span>
<span class="term-fg31">-        description: Docker image name</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-      docker_tags:</span>
<span class="term-fg31">-        description: Docker image tags as csv</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-      docker_file:</span>
<span class="term-fg31">-        description: Path to Dockerfile</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-      docker_context:</span>
<span class="term-fg31">-        description: Docker build context</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-      registry:</span>
<span class="term-fg31">-        description: Docker registry</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-        default: &quot;us-docker.pkg.dev&quot;</span>
<span class="term-fg31">-      repo:</span>
<span class="term-fg31">-        description: Docker repo</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-        default: &quot;oplabs-tools-artifacts&#47;images&quot;</span>
<span class="term-fg31">-    machine:</span>
<span class="term-fg31">-      image: ubuntu-2204:2022.07.1</span>
<span class="term-fg31">-      resource_class: medium</span>
<span class="term-fg31">-    steps:</span>
<span class="term-fg31">-      - checkout</span>
<span class="term-fg31">-      - run:</span>
<span class="term-fg31">-          command: mkdir -p &#47;tmp&#47;docker_images</span>
<span class="term-fg31">-      - run:</span>
<span class="term-fg31">-          name: Build</span>
<span class="term-fg31">-          command: |</span>
<span class="term-fg31">-            # Check to see if DOCKER_HUB_READ_ONLY_TOKEN is set (i.e. we are in repo) before attempting to use secrets.</span>
<span class="term-fg31">-            # Building should work without this read only login, but may get rate limited.</span>
<span class="term-fg31">-            if [[ -v DOCKER_HUB_READ_ONLY_TOKEN ]]; then</span>
<span class="term-fg31">-              echo &quot;$DOCKER_HUB_READ_ONLY_TOKEN&quot; | docker login -u &quot;$DOCKER_HUB_READ_ONLY_USER&quot; --password-stdin</span>
<span class="term-fg31">-            fi</span>
<span class="term-fg31">-            IMAGE_BASE=&quot;&lt;&lt;parameters.registry&gt;&gt;&#47;&lt;&lt;parameters.repo&gt;&gt;&#47;&lt;&lt;parameters.docker_name&gt;&gt;&quot;</span>
<span class="term-fg31">-            DOCKER_TAGS=$(echo -ne &lt;&lt;parameters.docker_tags&gt;&gt; | sed &quot;s&#47;,&#47;\n&#47;g&quot; | sed &quot;s&#47;[^a-zA-Z0-9\n]&#47;-&#47;g&quot; | sed -e &quot;s|^|-t ${IMAGE_BASE}:|&quot;)</span>
<span class="term-fg31">-            docker build --progress plain \</span>
<span class="term-fg31">-            $(echo -ne $DOCKER_TAGS | tr &#39;\n&#39; &#39; &#39;) \</span>
<span class="term-fg31">-            -f &lt;&lt;parameters.docker_file&gt;&gt; \</span>
<span class="term-fg31">-            &lt;&lt;parameters.docker_context&gt;&gt;</span>
<span class="term-fg31">-      - run:</span>
<span class="term-fg31">-          name: Save</span>
<span class="term-fg31">-          command: |</span>
<span class="term-fg31">-            IMAGE_BASE=&quot;&lt;&lt;parameters.registry&gt;&gt;&#47;&lt;&lt;parameters.repo&gt;&gt;&#47;&lt;&lt;parameters.docker_name&gt;&gt;&quot;</span>
<span class="term-fg31">-            DOCKER_LABELS=$(echo -ne &lt;&lt;parameters.docker_tags&gt;&gt; | sed &quot;s&#47;,&#47;\n&#47;g&quot; | sed &quot;s&#47;[^a-zA-Z0-9\n]&#47;-&#47;g&quot;)</span>
<span class="term-fg31">-            echo -ne $DOCKER_LABELS | tr &#39; &#39; &#39;\n&#39; | xargs -I {} docker save -o &#47;tmp&#47;docker_images&#47;&lt;&lt;parameters.docker_name&gt;&gt;_{}.tar $IMAGE_BASE:{}</span>
<span class="term-fg31">-      - persist_to_workspace:</span>
<span class="term-fg31">-          root: &#47;tmp&#47;docker_images</span>
<span class="term-fg31">-          paths:</span>
<span class="term-fg31">-            - &quot;.&quot;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-  docker-publish:</span>
<span class="term-fg31">-    environment:</span>
<span class="term-fg31">-      DOCKER_BUILDKIT: 1</span>
<span class="term-fg31">-    parameters:</span>
<span class="term-fg31">-      docker_name:</span>
<span class="term-fg31">-        description: Docker image name</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-      docker_tags:</span>
<span class="term-fg31">-        description: Docker image tags as csv</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-      docker_file:</span>
<span class="term-fg31">-        description: Path to Dockerfile</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-      docker_context:</span>
<span class="term-fg31">-        description: Docker build context</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-        default: &quot;.&quot;</span>
<span class="term-fg31">-      docker_target:</span>
<span class="term-fg31">-        description: &quot;target build stage&quot;</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-        default: &quot;&quot;</span>
<span class="term-fg31">-      registry:</span>
<span class="term-fg31">-        description: Docker registry</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-        default: &quot;us-docker.pkg.dev&quot;</span>
<span class="term-fg31">-      repo:</span>
<span class="term-fg31">-        description: Docker repo</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-        default: &quot;oplabs-tools-artifacts&#47;images&quot;</span>
<span class="term-fg31">-      platforms:</span>
<span class="term-fg31">-        description: Platforms to build for</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-        default: &quot;linux&#47;amd64&quot;</span>
<span class="term-fg31">-    machine:</span>
<span class="term-fg31">-      image: ubuntu-2204:2022.07.1</span>
<span class="term-fg31">-      resource_class: medium</span>
<span class="term-fg31">-    steps:</span>
<span class="term-fg31">-      - gcp-oidc-authenticate</span>
<span class="term-fg31">-      # Below is CircleCI recommended way of specifying nameservers on an Ubuntu box:</span>
<span class="term-fg31">-      # https:&#47;&#47;support.circleci.com&#47;hc&#47;en-us&#47;articles&#47;7323511028251-How-to-set-custom-DNS-on-Ubuntu-based-images-using-netplan</span>
<span class="term-fg31">-      - run: sudo sed -i &#39;13 i \ \ \ \ \ \ \ \ \ \ \ \ nameservers:&#39; &#47;etc&#47;netplan&#47;50-cloud-init.yaml</span>
<span class="term-fg31">-      - run: sudo sed -i &#39;14 i \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ addresses:&#39; &#47;etc&#47;netplan&#47;50-cloud-init.yaml</span>
<span class="term-fg31">-      - run: sudo sed -i &quot;s&#47;addresses:&#47; addresses&quot;:&quot; [8.8.8.8, 8.8.4.4] &#47;g&quot; &#47;etc&#47;netplan&#47;50-cloud-init.yaml</span>
<span class="term-fg31">-      - run: cat &#47;etc&#47;netplan&#47;50-cloud-init.yaml</span>
<span class="term-fg31">-      - run: sudo netplan apply</span>
<span class="term-fg31">-      - checkout</span>
<span class="term-fg31">-      - run:</span>
<span class="term-fg31">-          name: Build &amp; Publish</span>
<span class="term-fg31">-          command: |</span>
<span class="term-fg31">-            gcloud auth configure-docker &lt;&lt;parameters.registry&gt;&gt;</span>
<span class="term-fg31">-            IMAGE_BASE=&quot;&lt;&lt;parameters.registry&gt;&gt;&#47;&lt;&lt;parameters.repo&gt;&gt;&#47;&lt;&lt;parameters.docker_name&gt;&gt;&quot;</span>
<span class="term-fg31">-            DOCKER_TAGS=$(echo -ne &lt;&lt;parameters.docker_tags&gt;&gt; | sed &quot;s&#47;,&#47;\n&#47;g&quot; | sed &quot;s&#47;[^a-zA-Z0-9\n]&#47;-&#47;g&quot; | sed -e &quot;s|^|-t ${IMAGE_BASE}:|&quot;)</span>
<span class="term-fg31">-            docker context create buildx-build</span>
<span class="term-fg31">-            docker buildx create --use buildx-build</span>
<span class="term-fg31">-            docker buildx build --progress plain --platform=&lt;&lt;parameters.platforms&gt;&gt; --target &quot;&lt;&lt;parameters.docker_target&gt;&gt;&quot; --push \</span>
<span class="term-fg31">-              $(echo -ne $DOCKER_TAGS | tr &#39;\n&#39; &#39; &#39;) \</span>
<span class="term-fg31">-              -f &lt;&lt;parameters.docker_file&gt;&gt; \</span>
<span class="term-fg31">-              &lt;&lt;parameters.docker_context&gt;&gt;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-  docker-release:</span>
<span class="term-fg31">-    environment:</span>
<span class="term-fg31">-      DOCKER_BUILDKIT: 1</span>
<span class="term-fg31">-    parameters:</span>
<span class="term-fg31">-      docker_name:</span>
<span class="term-fg31">-        description: Docker image name</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-      docker_tags:</span>
<span class="term-fg31">-        description: Docker image tags as csv</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-      docker_file:</span>
<span class="term-fg31">-        description: Path to Dockerfile</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-      docker_context:</span>
<span class="term-fg31">-        description: Docker build context</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-      docker_target:</span>
<span class="term-fg31">-        description: &quot;target build stage&quot;</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-        default: &quot;&quot;</span>
<span class="term-fg31">-      registry:</span>
<span class="term-fg31">-        description: Docker registry</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-        default: &quot;us-docker.pkg.dev&quot;</span>
<span class="term-fg31">-      repo:</span>
<span class="term-fg31">-        description: Docker repo</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-        default: &quot;oplabs-tools-artifacts&#47;images&quot;</span>
<span class="term-fg31">-      platforms:</span>
<span class="term-fg31">-        description: Platforms to build for</span>
<span class="term-fg31">-        type: string</span>
<span class="term-fg31">-        default: &quot;linux&#47;amd64&quot;</span>
<span class="term-fg31">-    machine:</span>
<span class="term-fg31">-      image: ubuntu-2204:2022.07.1</span>
<span class="term-fg31">-      resource_class: medium</span>
<span class="term-fg31">-    steps:</span>
<span class="term-fg31">-      - gcp-cli&#47;install</span>
<span class="term-fg31">-      - gcp-oidc-authenticate</span>
<span class="term-fg31">-      - checkout</span>
<span class="term-fg31">-      - run:</span>
<span class="term-fg31">-          name: Configure Docker</span>
<span class="term-fg31">-          command: |</span>
<span class="term-fg31">-            gcloud auth configure-docker &lt;&lt;parameters.registry&gt;&gt;</span>
<span class="term-fg31">-      - run:</span>
<span class="term-fg31">-          name: Build &amp; Publish</span>
<span class="term-fg31">-          command: |</span>
<span class="term-fg31">-            IMAGE_BASE=&quot;&lt;&lt;parameters.registry&gt;&gt;&#47;&lt;&lt;parameters.repo&gt;&gt;&#47;&lt;&lt;parameters.docker_name&gt;&gt;&quot;</span>
<span class="term-fg31">-            DOCKER_TAGS=$(echo -ne &lt;&lt;parameters.docker_tags&gt;&gt; | sed &quot;s&#47;,&#47;\n&#47;g&quot; | sed &quot;s&#47;[^a-zA-Z0-9\n]&#47;-&#47;g&quot; | sed -e &quot;s|^|-t ${IMAGE_BASE}:|&quot;)</span>
<span class="term-fg31">-            docker context create buildx-build</span>
<span class="term-fg31">-            docker buildx create --use buildx-build</span>
<span class="term-fg31">-            docker buildx build --progress plain --platform=&lt;&lt;parameters.platforms&gt;&gt; --target &quot;&lt;&lt;parameters.docker_target&gt;&gt;&quot; --push \</span>
<span class="term-fg31">-              $(echo -ne $DOCKER_TAGS | tr &#39;\n&#39; &#39; &#39;) \</span>
<span class="term-fg31">-              -f &lt;&lt;parameters.docker_file&gt;&gt; \</span>
<span class="term-fg31">-              &lt;&lt;parameters.docker_context&gt;&gt;</span>
<span class="term-fg31">-      - run:</span>
<span class="term-fg31">-          name: Tag</span>
<span class="term-fg31">-          command: |</span>
<span class="term-fg31">-            .&#47;ops&#47;scripts&#47;ci-docker-tag-op-stack-release.sh &lt;&lt;parameters.registry&gt;&gt;&#47;&lt;&lt;parameters.repo&gt;&gt; $CIRCLE_TAG $CIRCLE_SHA1</span>
<span class="term-fg31">-</span>
   contracts-bedrock-coverage:
     docker:
       - image: us-docker.pkg.dev&#47;oplabs-tools-artifacts&#47;images&#47;ci-builder:latest
<span class="term-fg36">@@ -346,7 +130,7 @@</span>
   contracts-bedrock-tests:
     docker:
       - image: us-docker.pkg.dev&#47;oplabs-tools-artifacts&#47;images&#47;ci-builder:latest
<span class="term-fg31">-    resource_class: xlarge</span>
<span class="term-fg32">+    resource_class: large</span>
     steps:
       - checkout
       - check-changed:
<span class="term-fg36">@@ -366,7 +150,7 @@</span>
   contracts-bedrock-checks:
     docker:
       - image: us-docker.pkg.dev&#47;oplabs-tools-artifacts&#47;images&#47;ci-builder:latest
<span class="term-fg31">-    resource_class: xlarge</span>
<span class="term-fg32">+    resource_class: large</span>
     steps:
       - checkout
       - restore_cache:
<span class="term-fg36">@@ -632,32 +416,6 @@</span>       - run:
           name: markdown lint
           command: pnpm lint:specs:check
&nbsp;
<span class="term-fg31">-  bedrock-markdown-links:</span>
<span class="term-fg31">-    machine:</span>
<span class="term-fg31">-      image: ubuntu-2204:2022.07.1</span>
<span class="term-fg31">-    steps:</span>
<span class="term-fg31">-      - checkout</span>
<span class="term-fg31">-      - run:</span>
<span class="term-fg31">-          name: Install pnpm package manager</span>
<span class="term-fg31">-          command: |</span>
<span class="term-fg31">-            npm i pnpm --global</span>
<span class="term-fg31">-      - run:</span>
<span class="term-fg31">-          name: Install node_modules</span>
<span class="term-fg31">-          command: |</span>
<span class="term-fg31">-            pnpm install --frozen-lockfile --prefer-offline</span>
<span class="term-fg31">-      - run:</span>
<span class="term-fg31">-          name: Lint check</span>
<span class="term-fg31">-          command: |</span>
<span class="term-fg31">-            pnpm lint:specs:check</span>
<span class="term-fg31">-      - run:</span>
<span class="term-fg31">-          name: link lint</span>
<span class="term-fg31">-          command: |</span>
<span class="term-fg31">-            make bedrock-markdown-links</span>
<span class="term-fg31">-      - slack&#47;notify:</span>
<span class="term-fg31">-          channel: C055R639XT9 #notify-link-check</span>
<span class="term-fg31">-          event: fail</span>
<span class="term-fg31">-          template: basic_fail_1</span>
<span class="term-fg31">-</span>
   fuzz-op-node:
     docker:
       - image: us-docker.pkg.dev&#47;oplabs-tools-artifacts&#47;images&#47;ci-builder:latest
<span class="term-fg36">@@ -752,7 +510,6 @@</span>         description: Go Module Name
         type: string
     docker:
       - image: us-docker.pkg.dev&#47;oplabs-tools-artifacts&#47;images&#47;ci-builder:latest # only used to enable codecov.
<span class="term-fg31">-    resource_class: xlarge</span>
     steps:
       - checkout
       - run:
<span class="term-fg36">@@ -783,7 +540,6 @@</span>         description: The extra-process shim (if any) that should be used
         type: string
     docker:
       - image: us-docker.pkg.dev&#47;oplabs-tools-artifacts&#47;images&#47;ci-builder:latest
<span class="term-fg31">-    resource_class: xlarge</span>
     steps:
       - checkout
       - check-changed:
<span class="term-fg36">@@ -1060,21 +816,6 @@</span>     resource_class: medium
     steps:
       - run: echo Done
&nbsp;
<span class="term-fg31">-  fpp-verify:</span>
<span class="term-fg31">-    docker:</span>
<span class="term-fg31">-      - image: cimg&#47;go:1.20</span>
<span class="term-fg31">-    steps:</span>
<span class="term-fg31">-      - checkout</span>
<span class="term-fg31">-      - run:</span>
<span class="term-fg31">-          name: verify-goerli</span>
<span class="term-fg31">-          command: |</span>
<span class="term-fg31">-            make verify-goerli</span>
<span class="term-fg31">-          working_directory: op-program</span>
<span class="term-fg31">-      - slack&#47;notify:</span>
<span class="term-fg31">-          channel: C03N11M0BBN</span>
<span class="term-fg31">-          event: fail</span>
<span class="term-fg31">-          template: basic_fail_1</span>
<span class="term-fg31">-</span>
   check-generated-mocks-op-node:
     docker:
       - image: us-docker.pkg.dev&#47;oplabs-tools-artifacts&#47;images&#47;ci-builder:latest
<span class="term-fg36">@@ -1266,284 +1007,7 @@</span>             - op-program-tests
             - op-service-tests
             - op-e2e-WS-tests
             - op-e2e-HTTP-tests
<span class="term-fg31">-      - docker-build:</span>
<span class="term-fg31">-          name: op-node-docker-build</span>
<span class="term-fg31">-          docker_file: op-node&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: op-node</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          docker_context: .</span>
<span class="term-fg31">-      - docker-publish:</span>
<span class="term-fg31">-          name: op-node-docker-publish</span>
<span class="term-fg31">-          docker_name: op-node</span>
<span class="term-fg31">-          docker_file: op-node&#47;Dockerfile</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          context:</span>
<span class="term-fg31">-            - oplabs-gcr</span>
<span class="term-fg31">-          platforms: &quot;linux&#47;amd64,linux&#47;arm64&quot;</span>
<span class="term-fg31">-      - docker-build:</span>
<span class="term-fg31">-          name: op-batcher-docker-build</span>
<span class="term-fg31">-          docker_file: op-batcher&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: op-batcher</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          docker_context: .</span>
<span class="term-fg31">-      - docker-publish:</span>
<span class="term-fg31">-          name: op-batcher-docker-publish</span>
<span class="term-fg31">-          docker_file: op-batcher&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: op-batcher</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          context:</span>
<span class="term-fg31">-            - oplabs-gcr</span>
<span class="term-fg31">-          platforms: &quot;linux&#47;amd64,linux&#47;arm64&quot;</span>
<span class="term-fg31">-      - docker-build:</span>
<span class="term-fg31">-          name: op-program-docker-build</span>
<span class="term-fg31">-          docker_file: op-program&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: op-program</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          docker_context: .</span>
<span class="term-fg31">-      - docker-publish:</span>
<span class="term-fg31">-          name: op-program-docker-publish</span>
<span class="term-fg31">-          docker_file: op-program&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: op-program</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          context:</span>
<span class="term-fg31">-            - oplabs-gcr</span>
<span class="term-fg31">-          platforms: &quot;linux&#47;amd64,linux&#47;arm64&quot;</span>
<span class="term-fg31">-      - docker-build:</span>
<span class="term-fg31">-          name: op-proposer-docker-build</span>
<span class="term-fg31">-          docker_file: op-proposer&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: op-proposer</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          docker_context: .</span>
<span class="term-fg31">-      - docker-publish:</span>
<span class="term-fg31">-          name: op-proposer-docker-publish</span>
<span class="term-fg31">-          docker_file: op-proposer&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: op-proposer</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          context:</span>
<span class="term-fg31">-            - oplabs-gcr</span>
<span class="term-fg31">-          platforms: &quot;linux&#47;amd64,linux&#47;arm64&quot;</span>
<span class="term-fg31">-      - docker-build:</span>
<span class="term-fg31">-          name: op-challenger-docker-build</span>
<span class="term-fg31">-          docker_file: op-challenger&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: op-challenger</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          docker_context: .</span>
<span class="term-fg31">-      - docker-publish:</span>
<span class="term-fg31">-          name: op-challenger-docker-publish</span>
<span class="term-fg31">-          docker_file: op-challenger&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: op-challenger</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          context:</span>
<span class="term-fg31">-            - oplabs-gcr</span>
<span class="term-fg31">-          platforms: &quot;linux&#47;amd64,linux&#47;arm64&quot;</span>
<span class="term-fg31">-      - docker-build:</span>
<span class="term-fg31">-          name: op-heartbeat-docker-build</span>
<span class="term-fg31">-          docker_file: op-heartbeat&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: op-heartbeat</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          docker_context: .</span>
<span class="term-fg31">-      - docker-publish:</span>
<span class="term-fg31">-          name: op-heartbeat-docker-publish</span>
<span class="term-fg31">-          docker_file: op-heartbeat&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: op-heartbeat</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          context:</span>
<span class="term-fg31">-            - oplabs-gcr</span>
<span class="term-fg31">-      - docker-build:</span>
<span class="term-fg31">-          name: indexer-docker-build</span>
<span class="term-fg31">-          docker_file: indexer&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: indexer</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          docker_context: .</span>
<span class="term-fg31">-      - docker-publish:</span>
<span class="term-fg31">-          name: indexer-docker-publish</span>
<span class="term-fg31">-          docker_file: indexer&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: indexer</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          context:</span>
<span class="term-fg31">-            - oplabs-gcr</span>
<span class="term-fg31">-      - docker-publish:</span>
<span class="term-fg31">-          name: chain-mon-docker-publish</span>
<span class="term-fg31">-          docker_file: .&#47;ops&#47;docker&#47;Dockerfile.packages</span>
<span class="term-fg31">-          docker_name: chain-mon</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          docker_target: wd-mon</span>
<span class="term-fg31">-          context:</span>
<span class="term-fg31">-            - oplabs-gcr</span>
       - check-generated-mocks-op-node
       - check-generated-mocks-op-service
       - cannon-go-lint-and-test
<span class="term-fg31">-      - cannon-build-test-vectors</span>
<span class="term-fg31">-  release:</span>
<span class="term-fg31">-    jobs:</span>
<span class="term-fg31">-      - hold:</span>
<span class="term-fg31">-          type: approval</span>
<span class="term-fg31">-          filters:</span>
<span class="term-fg31">-            tags:</span>
<span class="term-fg31">-              only: &#47;^(proxyd|indexer|ci-builder|op-[a-z0-9\-]*)\&#47;v.*&#47;</span>
<span class="term-fg31">-            branches:</span>
<span class="term-fg31">-              ignore: &#47;.*&#47;</span>
<span class="term-fg31">-      - docker-release:</span>
<span class="term-fg31">-          name: op-node-docker-release</span>
<span class="term-fg31">-          filters:</span>
<span class="term-fg31">-            tags:</span>
<span class="term-fg31">-              only: &#47;^op-node\&#47;v.*&#47;</span>
<span class="term-fg31">-            branches:</span>
<span class="term-fg31">-              ignore: &#47;.*&#47;</span>
<span class="term-fg31">-          docker_file: op-node&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: op-node</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          docker_context: .</span>
<span class="term-fg31">-          platforms: &quot;linux&#47;amd64,linux&#47;arm64&quot;</span>
<span class="term-fg31">-          context:</span>
<span class="term-fg31">-            - oplabs-gcr-release</span>
<span class="term-fg31">-          requires:</span>
<span class="term-fg31">-            - hold</span>
<span class="term-fg31">-      - docker-release:</span>
<span class="term-fg31">-          name: op-batcher-docker-release</span>
<span class="term-fg31">-          filters:</span>
<span class="term-fg31">-            tags:</span>
<span class="term-fg31">-              only: &#47;^op-batcher\&#47;v.*&#47;</span>
<span class="term-fg31">-            branches:</span>
<span class="term-fg31">-              ignore: &#47;.*&#47;</span>
<span class="term-fg31">-          docker_file: op-batcher&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: op-batcher</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          docker_context: .</span>
<span class="term-fg31">-          platforms: &quot;linux&#47;amd64,linux&#47;arm64&quot;</span>
<span class="term-fg31">-          context:</span>
<span class="term-fg31">-            - oplabs-gcr-release</span>
<span class="term-fg31">-          requires:</span>
<span class="term-fg31">-            - hold</span>
<span class="term-fg31">-      - docker-release:</span>
<span class="term-fg31">-          name: op-proposer-docker-release</span>
<span class="term-fg31">-          filters:</span>
<span class="term-fg31">-            tags:</span>
<span class="term-fg31">-              only: &#47;^op-proposer\&#47;v.*&#47;</span>
<span class="term-fg31">-            branches:</span>
<span class="term-fg31">-              ignore: &#47;.*&#47;</span>
<span class="term-fg31">-          docker_file: op-proposer&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: op-proposer</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          docker_context: .</span>
<span class="term-fg31">-          platforms: &quot;linux&#47;amd64,linux&#47;arm64&quot;</span>
<span class="term-fg31">-          context:</span>
<span class="term-fg31">-            - oplabs-gcr-release</span>
<span class="term-fg31">-          requires:</span>
<span class="term-fg31">-            - hold</span>
<span class="term-fg31">-      - docker-release:</span>
<span class="term-fg31">-          name: op-challenger-docker-release</span>
<span class="term-fg31">-          filters:</span>
<span class="term-fg31">-            tags:</span>
<span class="term-fg31">-              only: &#47;^op-challenger\&#47;v.*&#47;</span>
<span class="term-fg31">-            branches:</span>
<span class="term-fg31">-              ignore: &#47;.*&#47;</span>
<span class="term-fg31">-          docker_file: op-challenger&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: op-challenger</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          docker_context: .</span>
<span class="term-fg31">-          platforms: &quot;linux&#47;amd64,linux&#47;arm64&quot;</span>
<span class="term-fg31">-          context:</span>
<span class="term-fg31">-            - oplabs-gcr-release</span>
<span class="term-fg31">-          requires:</span>
<span class="term-fg31">-            - hold</span>
<span class="term-fg31">-      - docker-build:</span>
<span class="term-fg31">-          name: op-migrate-docker-release</span>
<span class="term-fg31">-          filters:</span>
<span class="term-fg31">-            tags:</span>
<span class="term-fg31">-              only: &#47;^op-migrate\&#47;v.*&#47;</span>
<span class="term-fg31">-            branches:</span>
<span class="term-fg31">-              ignore: &#47;.*&#47;</span>
<span class="term-fg31">-          docker_file: op-chain-ops&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: op-migrate</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          docker_context: .</span>
<span class="term-fg31">-          context:</span>
<span class="term-fg31">-            - oplabs-gcr-release</span>
<span class="term-fg31">-          requires:</span>
<span class="term-fg31">-            - hold</span>
<span class="term-fg31">-      - docker-release:</span>
<span class="term-fg31">-          name: op-ufm-docker-release</span>
<span class="term-fg31">-          filters:</span>
<span class="term-fg31">-            tags:</span>
<span class="term-fg31">-              only: &#47;^op-ufm\&#47;v.*&#47;</span>
<span class="term-fg31">-            branches:</span>
<span class="term-fg31">-              ignore: &#47;.*&#47;</span>
<span class="term-fg31">-          docker_file: op-ufm&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: op-ufm</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          docker_context: .</span>
<span class="term-fg31">-          context:</span>
<span class="term-fg31">-            - oplabs-gcr-release</span>
<span class="term-fg31">-          requires:</span>
<span class="term-fg31">-            - hold</span>
<span class="term-fg31">-      - docker-release:</span>
<span class="term-fg31">-          name: proxyd-docker-release</span>
<span class="term-fg31">-          filters:</span>
<span class="term-fg31">-            tags:</span>
<span class="term-fg31">-              only: &#47;^proxyd\&#47;v.*&#47;</span>
<span class="term-fg31">-            branches:</span>
<span class="term-fg31">-              ignore: &#47;.*&#47;</span>
<span class="term-fg31">-          docker_file: proxyd&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: proxyd</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          docker_context: .</span>
<span class="term-fg31">-          context:</span>
<span class="term-fg31">-            - oplabs-gcr-release</span>
<span class="term-fg31">-          requires:</span>
<span class="term-fg31">-            - hold</span>
<span class="term-fg31">-      - docker-release:</span>
<span class="term-fg31">-          name: indexer-docker-release</span>
<span class="term-fg31">-          filters:</span>
<span class="term-fg31">-            tags:</span>
<span class="term-fg31">-              only: &#47;^indexer\&#47;v.*&#47;</span>
<span class="term-fg31">-            branches:</span>
<span class="term-fg31">-              ignore: &#47;.*&#47;</span>
<span class="term-fg31">-          docker_file: indexer&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: indexer</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.branch&gt;&gt;</span>
<span class="term-fg31">-          docker_context: .</span>
<span class="term-fg31">-          context:</span>
<span class="term-fg31">-            - oplabs-gcr-release</span>
<span class="term-fg31">-          requires:</span>
<span class="term-fg31">-            - hold</span>
<span class="term-fg31">-      - docker-release:</span>
<span class="term-fg31">-          name: ci-builder-docker-release</span>
<span class="term-fg31">-          filters:</span>
<span class="term-fg31">-            tags:</span>
<span class="term-fg31">-              only: &#47;^ci-builder\&#47;v.*&#47;</span>
<span class="term-fg31">-            branches:</span>
<span class="term-fg31">-              ignore: &#47;.*&#47;</span>
<span class="term-fg31">-          docker_file: .&#47;ops&#47;docker&#47;ci-builder&#47;Dockerfile</span>
<span class="term-fg31">-          docker_name: ci-builder</span>
<span class="term-fg31">-          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,latest</span>
<span class="term-fg31">-          docker_context: .</span>
<span class="term-fg31">-          context:</span>
<span class="term-fg31">-            - oplabs-gcr</span>
<span class="term-fg31">-          requires:</span>
<span class="term-fg31">-            - hold</span>
<span class="term-fg31">-  scheduled-fpp:</span>
<span class="term-fg31">-    triggers:</span>
<span class="term-fg31">-      - schedule:</span>
<span class="term-fg31">-          # run every 4 hours</span>
<span class="term-fg31">-          cron: &quot;0 0,6,12,18 * * *&quot;</span>
<span class="term-fg31">-          filters:</span>
<span class="term-fg31">-            branches:</span>
<span class="term-fg31">-              only: [&quot;develop&quot;]</span>
<span class="term-fg31">-    jobs:</span>
<span class="term-fg31">-      - fpp-verify:</span>
<span class="term-fg31">-          context:</span>
<span class="term-fg31">-            - slack</span>
<span class="term-fg31">-            - oplabs-fpp-nodes</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-  scheduled-link-check:</span>
<span class="term-fg31">-    triggers:</span>
<span class="term-fg31">-      - schedule:</span>
<span class="term-fg31">-          # Run once a day, only on the develop branch</span>
<span class="term-fg31">-          cron: &quot;0 0 * * *&quot;</span>
<span class="term-fg31">-          filters:</span>
<span class="term-fg31">-            branches:</span>
<span class="term-fg31">-              only: [&quot;develop&quot;]</span>
<span class="term-fg31">-    jobs:</span>
<span class="term-fg31">-      - bedrock-markdown-links:</span>
<span class="term-fg31">-          context: slack</span>
<span class="term-fg32">+      - cannon-build-test-vectors</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5e077279e8c3b62b6e5b89af" role="button"
                   aria-expanded="false" aria-controls="id-5e077279e8c3b62b6e5b89af">
                    <code>.github/workflows/pages.yml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/celo-org/optimism/blob/b9559d61caf873fdaa89f22e6960fdaed8511263/.github/workflows/pages.yml" target="_blank">CELO <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+33</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5e077279e8c3b62b6e5b89af"><span class="term-fg1">diff --git OP&#47;.github&#47;workflows&#47;pages.yml CELO&#47;.github&#47;workflows&#47;pages.yml</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..68ec20eff263e526661432dc304b005b378af875</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ CELO&#47;.github&#47;workflows&#47;pages.yml</span>
<span class="term-fg36">@@ -0,0 +1,33 @@</span>
<span class="term-fg32">+name: Build and publish forkdiff github-pages</span>
<span class="term-fg32">+permissions:</span>
<span class="term-fg32">+  contents: write</span>
<span class="term-fg32">+on:</span>
<span class="term-fg32">+  push:</span>
<span class="term-fg32">+    branches:</span>
<span class="term-fg32">+      - celo[0-9]+</span>
<span class="term-fg32">+jobs:</span>
<span class="term-fg32">+  deploy:</span>
<span class="term-fg32">+    concurrency: ci-${{ github.ref }}</span>
<span class="term-fg32">+    runs-on: ubuntu-latest</span>
<span class="term-fg32">+    steps:</span>
<span class="term-fg32">+      - name: Checkout</span>
<span class="term-fg32">+        uses: actions&#47;checkout@v3</span>
<span class="term-fg32">+        with:</span>
<span class="term-fg32">+          fetch-depth: 1000  # make sure to fetch the old commit we diff against</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+      - name: Build forkdiff</span>
<span class="term-fg32">+        uses: &quot;docker:&#47;&#47;protolambda&#47;forkdiff:latest&quot;</span>
<span class="term-fg32">+        with:</span>
<span class="term-fg32">+          args: -repo=&#47;github&#47;workspace -fork=&#47;github&#47;workspace&#47;fork.yaml -out=&#47;github&#47;workspace&#47;index.html</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+      - name: Build pages</span>
<span class="term-fg32">+        run: |</span>
<span class="term-fg32">+          mkdir -p tmp&#47;pages</span>
<span class="term-fg32">+          mv index.html tmp&#47;pages&#47;index.html</span>
<span class="term-fg32">+          touch tmp&#47;pages&#47;.nojekyll</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+      - name: Deploy</span>
<span class="term-fg32">+        uses: JamesIves&#47;github-pages-deploy-action@v4</span>
<span class="term-fg32">+        with:</span>
<span class="term-fg32">+          folder: tmp&#47;pages</span>
<span class="term-fg32">+          clean: true</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e90742c8cc3148510e5e4cfb" role="button"
                   aria-expanded="false" aria-controls="id-e90742c8cc3148510e5e4cfb">
                    <code>fork.yaml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/celo-org/optimism/blob/b9559d61caf873fdaa89f22e6960fdaed8511263/fork.yaml" target="_blank">CELO <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+145</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e90742c8cc3148510e5e4cfb"><span class="term-fg1">diff --git OP&#47;fork.yaml CELO&#47;fork.yaml</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..07f63589f66b312aea37b1ac27c77b3a640a1aee</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ CELO&#47;fork.yaml</span>
<span class="term-fg36">@@ -0,0 +1,145 @@</span>
<span class="term-fg32">+title: &quot;CELO &lt;&gt; OP optimism forkdiff&quot;</span>
<span class="term-fg32">+footer: |</span>
<span class="term-fg32">+  Fork-diff overview of changes made in [Celo&#39;s `optimism`](https:&#47;&#47;github.com&#47;celo-org&#47;optimism),</span>
<span class="term-fg32">+  a fork of [Optimism&#39;s `optimism`](https:&#47;&#47;github.com&#47;ethereum-optimism&#47;optimism).</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+base:</span>
<span class="term-fg32">+  name: OP</span>
<span class="term-fg32">+  url: https:&#47;&#47;github.com&#47;ethereum-optimism&#47;optimism</span>
<span class="term-fg32">+  hash: c0f0f2d5fc6f1aaa6bf05e102ec0b8bdf74356db # tracks the last rebased commit</span>
<span class="term-fg32">+fork:</span>
<span class="term-fg32">+  name: CELO</span>
<span class="term-fg32">+  url: https:&#47;&#47;github.com&#47;celo-org&#47;optimism</span>
<span class="term-fg32">+  ref: HEAD</span>
<span class="term-fg32">+def:</span>
<span class="term-fg32">+  title: &quot;Celo&#39;s optimism&quot;</span>
<span class="term-fg32">+  description: |</span>
<span class="term-fg32">+    This is an overview of the changes in [Celo&#39;s `optimism` implementation](https:&#47;&#47;github.com&#47;celo-org&#47;optimism),</span>
<span class="term-fg32">+    a fork of [Optimism&#39;s `optimism`](https:&#47;&#47;github.com&#47;ethereum-optimism&#47;optimism).</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    Changes are currently separated by sub-package or component. Check out the [README](https:&#47;&#47;github.com&#47;celo-org&#47;optimism&#47;blob&#47;develop&#47;README.md)</span>
<span class="term-fg32">+    for more details about each of these components and packages.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+  sub:</span>
<span class="term-fg32">+    - title: &quot;packages&#47;*&quot;</span>
<span class="term-fg32">+      description: &quot;&quot;</span>
<span class="term-fg32">+      sub:</span>
<span class="term-fg32">+      - title: &quot;common-ts&quot;</span>
<span class="term-fg32">+        description: &quot;&quot;</span>
<span class="term-fg32">+        globs:</span>
<span class="term-fg32">+          - &quot;packages&#47;common-ts&#47;*&quot;</span>
<span class="term-fg32">+      - title: &quot;contracts-bedrock&quot;</span>
<span class="term-fg32">+        description: &quot;&quot;</span>
<span class="term-fg32">+        globs:</span>
<span class="term-fg32">+          - &quot;packages&#47;contracts-bedrock&#47;*&quot;</span>
<span class="term-fg32">+          - &quot;packages&#47;contracts-bedrock&#47;*&#47;*&quot;</span>
<span class="term-fg32">+          - &quot;packages&#47;contracts-bedrock&#47;*&#47;*&#47;*&quot;</span>
<span class="term-fg32">+      - title: &quot;core-utils&quot;</span>
<span class="term-fg32">+        description: &quot;&quot;</span>
<span class="term-fg32">+        globs:</span>
<span class="term-fg32">+          - &quot;packages&#47;core-utils&#47;*&quot;</span>
<span class="term-fg32">+      - title: &quot;chain-mon&quot;</span>
<span class="term-fg32">+        description: &quot;&quot;</span>
<span class="term-fg32">+        globs:</span>
<span class="term-fg32">+          - &quot;packages&#47;chain-mon&#47;*&quot;</span>
<span class="term-fg32">+      - title: &quot;sdk&quot;</span>
<span class="term-fg32">+        description: &quot;&quot;</span>
<span class="term-fg32">+        globs:</span>
<span class="term-fg32">+          - &quot;packages&#47;sdk&#47;*&quot;</span>
<span class="term-fg32">+    - title: &quot;op-bindings&quot;</span>
<span class="term-fg32">+      description: &quot;&quot;</span>
<span class="term-fg32">+      globs:</span>
<span class="term-fg32">+        - &quot;op-bindings&#47;*&quot;</span>
<span class="term-fg32">+        - &quot;op-bindings&#47;*&#47;*&quot;</span>
<span class="term-fg32">+    - title: &quot;op-batcher&quot;</span>
<span class="term-fg32">+      description: &quot;&quot;</span>
<span class="term-fg32">+      globs:</span>
<span class="term-fg32">+        - &quot;op-batcher&#47;*&quot;</span>
<span class="term-fg32">+    - title: &quot;op-bootnode&quot;</span>
<span class="term-fg32">+      description: &quot;&quot;</span>
<span class="term-fg32">+      globs:</span>
<span class="term-fg32">+        - &quot;op-bootnode&#47;*&quot;</span>
<span class="term-fg32">+    - title: &quot;op-chain-ops&quot;</span>
<span class="term-fg32">+      description: &quot;&quot;</span>
<span class="term-fg32">+      globs:</span>
<span class="term-fg32">+        - &quot;op-chain-ops&#47;*&quot;</span>
<span class="term-fg32">+        - &quot;op-chain-ops&#47;*&#47;*&quot;</span>
<span class="term-fg32">+        - &quot;op-chain-ops&#47;*&#47;*&#47;*&quot;</span>
<span class="term-fg32">+    - title: &quot;op-challenger&quot;</span>
<span class="term-fg32">+      description: &quot;&quot;</span>
<span class="term-fg32">+      globs:</span>
<span class="term-fg32">+        - &quot;op-challenger&#47;*&quot;</span>
<span class="term-fg32">+        - &quot;op-challenger&#47;*&#47;*&quot;</span>
<span class="term-fg32">+        - &quot;op-challenger&#47;*&#47;*&#47;*&quot;</span>
<span class="term-fg32">+    - title: &quot;op-e2e&quot;</span>
<span class="term-fg32">+      description: &quot;&quot;</span>
<span class="term-fg32">+      globs:</span>
<span class="term-fg32">+        - &quot;op-e2e&#47;*&quot;</span>
<span class="term-fg32">+        - &quot;op-e2e&#47;*&#47;*&quot;</span>
<span class="term-fg32">+        - &quot;op-e2e&#47;*&#47;*&#47;*&quot;</span>
<span class="term-fg32">+        - &quot;op-e2e&#47;*&#47;*&#47;*&#47;*&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    - title: &quot;op-exporter&quot;</span>
<span class="term-fg32">+      description: &quot;&quot;</span>
<span class="term-fg32">+      globs:</span>
<span class="term-fg32">+        - &quot;op-exporter&#47;*&quot;</span>
<span class="term-fg32">+    - title: &quot;op-heartbeat&quot;</span>
<span class="term-fg32">+      description: &quot;&quot;</span>
<span class="term-fg32">+      globs:</span>
<span class="term-fg32">+        - &quot;op-heartbeat&#47;*&quot;</span>
<span class="term-fg32">+    - title: &quot;op-node&quot;</span>
<span class="term-fg32">+      description: &quot;&quot;</span>
<span class="term-fg32">+      globs:</span>
<span class="term-fg32">+        - &quot;op-node&#47;*&quot;</span>
<span class="term-fg32">+        - &quot;op-node&#47;*&#47;*&quot;</span>
<span class="term-fg32">+        - &quot;op-node&#47;*&#47;*&#47;*&quot;</span>
<span class="term-fg32">+    - title: &quot;op-program&quot;</span>
<span class="term-fg32">+      description: &quot;&quot;</span>
<span class="term-fg32">+      globs:</span>
<span class="term-fg32">+        - &quot;op-program&#47;*&quot;</span>
<span class="term-fg32">+    - title: &quot;op-proposer&quot;</span>
<span class="term-fg32">+      description: &quot;&quot;</span>
<span class="term-fg32">+      globs:</span>
<span class="term-fg32">+        - &quot;op-proposer&#47;*&quot;</span>
<span class="term-fg32">+    - title: &quot;op-service&quot;</span>
<span class="term-fg32">+      description: &quot;&quot;</span>
<span class="term-fg32">+      globs:</span>
<span class="term-fg32">+        - &quot;op-service&#47;*&quot;</span>
<span class="term-fg32">+    - title: &quot;op-signer&quot;</span>
<span class="term-fg32">+      description: &quot;&quot;</span>
<span class="term-fg32">+      globs:</span>
<span class="term-fg32">+        - &quot;op-signer&#47;*&quot;</span>
<span class="term-fg32">+    - title: &quot;op-wheel&quot;</span>
<span class="term-fg32">+      description: &quot;&quot;</span>
<span class="term-fg32">+      globs:</span>
<span class="term-fg32">+        - &quot;op-wheel&#47;*&quot;</span>
<span class="term-fg32">+    - title: &quot;ops-bedrock&quot;</span>
<span class="term-fg32">+      description: &quot;&quot;</span>
<span class="term-fg32">+      globs:</span>
<span class="term-fg32">+        - &quot;ops-bedrock&#47;*&quot;</span>
<span class="term-fg32">+    - title: &quot;proxyd&quot;</span>
<span class="term-fg32">+      description: &quot;&quot;</span>
<span class="term-fg32">+      globs:</span>
<span class="term-fg32">+        - &quot;proxyd&#47;*&quot;</span>
<span class="term-fg32">+    - title: &quot;specs&quot;</span>
<span class="term-fg32">+      description: &quot;&quot;</span>
<span class="term-fg32">+      globs:</span>
<span class="term-fg32">+        - &quot;specs&#47;*&quot;</span>
<span class="term-fg32">+    - title: &quot;indexer&quot;</span>
<span class="term-fg32">+      description: &quot;&quot;</span>
<span class="term-fg32">+      globs:</span>
<span class="term-fg32">+        - &quot;indexer&#47;*&quot;</span>
<span class="term-fg32">+        - &quot;indexer&#47;*&#47;*&quot;</span>
<span class="term-fg32">+        - &quot;indexer&#47;*&#47;*&#47;*&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+# ignored globally, does not count towards line count</span>
<span class="term-fg32">+ignore:</span>
<span class="term-fg32">+  - &quot;.circleci&#47;*&quot;</span>
<span class="term-fg32">+  - &quot;*.sum&quot;</span>
<span class="term-fg32">+  - &quot;go.mod&quot;</span>
<span class="term-fg32">+  - &quot;fork.yaml&quot;</span>
<span class="term-fg32">+  - &quot;.github&#47;workflows&#47;*&quot;</span>
<span class="term-fg32">+  - &quot;.changeset&#47;*&quot;</span>
<span class="term-fg32">+  - &quot;.github&#47;*&quot;</span>
<span class="term-fg32">+  - &quot;CONTRIBUTING.md&quot;</span>
<span class="term-fg32">+  - &quot;pnpm-lock.yaml&quot;</span></div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

                    </div>
                
            </div>
        </main>
    </div>

    <footer class="col-xl-10 col-xxl-8 mx-auto px-3 pt-5 my-5 text-muted border-top">
        <p>Fork-diff overview of changes made in <a href="https://github.com/celo-org/optimism">Celo&rsquo;s <code>optimism</code></a>,
a fork of <a href="https://github.com/ethereum-optimism/optimism">Optimism&rsquo;s <code>optimism</code></a>.</p>

    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js" integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD" crossorigin="anonymous"></script>
    <script type="text/javascript">
        const storedTheme = localStorage.getItem('theme')

        // Get the preferred theme from the user's OS
        const getPreferredTheme = () => {
            if (storedTheme) {
                return storedTheme
            }

            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
        }

        // Set the bootstrap theme
        const setTheme = function (theme) {
            document.documentElement.setAttribute('data-bs-theme', theme)
            if (theme === 'dark') {
                document.getElementById('dark-mode-toggle').setAttribute('checked', true)
                document.getElementById('dark-mode-icon').classList.replace('bi-brightness-high-fill', 'bi-brightness-low')
            } else {
                document.getElementById('dark-mode-toggle').setAttribute('checked', false)
                document.getElementById('dark-mode-icon').classList.replace('bi-brightness-low', 'bi-brightness-high-fill')
            }
        }

        // Returns true if the current theme is dark
        const isDark = () => {
            return document.documentElement.getAttribute('data-bs-theme') === 'dark'
        }

        // Toggles dark mode
        const toggleDarkMode = () => {
            const newTheme = isDark() ? 'light' : 'dark'
            setTheme(newTheme)
            localStorage.setItem('theme', newTheme)
        }

        // Set the preferred theme on page load
        window.onload = () => {
            // Set preferred theme
            setTheme(getPreferredTheme());
            // Initialize tooltips
            const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
            const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
        }

        // Toggle dark mode when the toggle button is clicked
        addEventListener("click", (event) => {
            if (event.target.id === 'dark-mode-toggle') {
                toggleDarkMode();
                // De-focus the toggle
                document.activeElement.blur()
            }
        });
    </script>
</body>
</html>
